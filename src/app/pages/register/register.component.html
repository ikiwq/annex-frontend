<div class="h-full flex flex-col items-center justify-center">
    <h1 class="text-4xl font-semibold mt-24 mb-2">Sign Up</h1>
    <form [formGroup]="registerForm" class="w-80 max-h-full" (ngSubmit)="register()">
        <div class="flex flex-col gap-4 relative">
            <div class="flex flex-col gap-3">
                <div class="flex flex-col w-full">
                    <p class="text-xl">Email</p>
                    <input [formControlName]="'email'" class="auth-input"
                        [ngClass]="!registerForm.get('email').valid && registerForm.get('email').touched && 'auth-input-wrong'"
                        type="text" name="email">
                    <p class="error-message"
                        *ngIf="!registerForm.get('email').valid && registerForm.get('email').touched && 'auth-input-wrong'">
                        Please insert a valid email address.</p>
                </div>
                <div class="flex flex-col w-full">
                    <p class="text-xl">Username<span class="text-sm whitespace-nowrap "> (at least 6 characters)</span>
                    </p>
                    <input [formControlName]="'username'" class="auth-input"
                        [ngClass]="(!registerForm.get('username').valid && registerForm.get('username').touched || !usernameAvaible) && 'auth-input-wrong'"
                        type="text" name="username">
                    <p class="error-message"
                        *ngIf="!registerForm.get('username').valid && registerForm.get('username').touched && 'auth-input-wrong'">
                        Please insert a valid username.</p>
                    <p class="error-message" *ngIf="registerForm.get('username').valid && !usernameAvaible">Username not
                        avaible!</p>
                </div>
                <div class="flex flex-col w-full">
                    <p class="text-xl">Password</p>
                    <div class="relative"><input [formControlName]="'password'" class="auth-input w-full"
                            [ngClass]="!registerForm.get('password').valid && registerForm.get('password').touched && 'auth-input-wrong'"
                            [type]="showPassword ? 'text' : 'password' " name="password"
                            formControlName="password"><mat-icon class="absolute top-3 right-2 text-color-accent"
                            (click)="togglePassword()">{{showPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </div>
                    <p class="error-message"
                        *ngIf="!registerForm.get('password').valid && registerForm.get('password').touched && 'auth-input-wrong'">
                        Please insert a valid password.</p>
                </div>
            </div>
            <button [disabled]="!registerForm.valid"
                class="font-bold button-accent py-3 rounded-sm flex transition-all duration-300 text-white justify-center items-center max-h-12">
                <p *ngIf="!isLoading">Register</p>
                <div *ngIf="isLoading" class="scale-50">
                    <app-loading></app-loading>
                </div>
            </button>
            <div *ngIf="errorMessage"
                class="text-white font-semibold flex gap-1 justify-center items-center bg-red-500 px-2 py-2">
                <p class="text-white break-words min-w-0">{{errorMessage}}</p><mat-icon
                    class="min-w-min">error</mat-icon>
            </div>
            <div *ngIf="successMessage"
                class="text-white font-semibold flex gap-1 justify-center items-center bg-green-700 px-2 py-2">
                <p class="text-white break-words min-w-0">{{successMessage}}</p><mat-icon style="min-width: 10%;">done
                    icon</mat-icon>
            </div>
        </div>
    </form>
    <div class="flex items-center justify-center mt-2">
        <p class="">Already have an account?<a routerLink="/login"><span
                    class="text-color-accent text-xl hover:cursor-pointer font-semibold transition-all duration-300">
                    Log in!</span></a></p>
    </div>
    <a routerLink="/">
        <div class="mt-4 flex items-end justify-center "><mat-icon class=" scale-50">arrow_back_ios</mat-icon>Return to
            home page</div>
    </a>
</div>